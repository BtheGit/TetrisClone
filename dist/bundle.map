{"version":3,"sources":["webpack:///webpack/bootstrap 473a3f94b4c96541ee92","webpack:///./client/utilities/utilities.js","webpack:///./client/components/Player.js","webpack:///./client/components/Board.js","webpack:///./client/components/Piece.js","webpack:///./client/main.js"],"names":["drawMatrix","canvasText","ctx","matrix","position","blockSize","colorScheme","pieces","outline","y","length","x","fillStyle","fillRect","strokeStyle","strokeRect","text","font","size","startX","startY","textAlign","fillText","Player","board","score","linesCleared","isDead","activePiece","nextPiece","width","direction","checkBoardCollision","mergePiece","resetPiece","checkCompletedLines","type","completedLines","i","some","elem","splice","unshift","Array","fill","render","undefined","tileSize","Board","height","generateEmptyBoard","push","piece","Piece","newRandomType","createPiece","initX","Math","floor","initY","random","swapped","JSON","parse","stringify","reverse","BLOCK","LEFT_OFFSET","TOP_OFFSET","BOARD_WIDTH","BOARD_HEIGHT","CANVAS_WIDTH","CANVAS_HEIGHT","canvas","document","getElementById","getContext","defaultColorScheme","game","player","DROP_INIT","DROP_MAX","speedModifier","dropInterval","dropCounter","lastTime","clsGameActive","addEventListener","handleKeydown","event","keyCode","movePiece","dropPiece","rotate","gameActive","time","updateDropInterval","deltaTime","requestAnimationFrame"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 473a3f94b4c96541ee92","export function drawMatrix(\r\n\tctx,\r\n\tmatrix, \r\n\tposition, \r\n\tblockSize, \r\n\tcolorScheme = {\r\n\t\tpieces: ['red', 'blue', 'purple', 'pink','orange', 'indigo', 'green'],\r\n\t\toutline: 'black',\r\n\t}\r\n)\r\n{\r\n\tfor(let y = 0; y < matrix.length; y++) {\r\n\t\tfor (let x = 0; x < matrix[y].length; x++){\r\n\t\t\tif(matrix[y][x]){\r\n\t\t\t\tctx.fillStyle = colorScheme.pieces[matrix[y][x] - 1];\r\n\t\t\t\tctx.fillRect(\r\n\t\t\t\t\t(x + position.x) * blockSize, \r\n\t\t\t\t\t(y + position.y) * blockSize, \r\n\t\t\t\t\tblockSize, \r\n\t\t\t\t\tblockSize\r\n\t\t\t\t);\t\r\n\t\t\t\tctx.strokeStyle = colorScheme.outline;\r\n\t\t\t\tctx.strokeRect(\r\n\t\t\t\t\t(x + position.x) * blockSize, \r\n\t\t\t\t\t(y + position.y) * blockSize, \r\n\t\t\t\t\tblockSize, \r\n\t\t\t\t\tblockSize\r\n\t\t\t\t)\t\t\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function canvasText(ctx, text, font ='Arial', size, startX, startY, fillStyle, textAlign = \"start\") {\r\n\tctx.font = size + \" \" + font;\r\n\tctx.fillStyle = fillStyle;\r\n\tctx.textAlign = textAlign;\r\n\tctx.fillText(text, startX, startY, 80)\r\n}\n\n\n// WEBPACK FOOTER //\n// ./client/utilities/utilities.js","import Board from './Board';\r\nimport Piece from './Piece';\r\nimport {canvasText} from '../utilities/utilities';\r\n\r\nexport default class Player {\r\n\tconstructor(board){\r\n\t\tthis.ctx = board.ctx;\r\n\t\tthis.score = 0;\r\n\t\tthis.linesCleared = 0;\r\n\t\tthis.isDead = false;\r\n\t\tthis.colorScheme = board.colorScheme;\r\n\t\tthis.board = new Board(board)\r\n\t\tthis.activePiece = new Piece(this.board);\r\n\t\tthis.nextPiece = new Piece(this.board);\r\n\t\tthis.nextPiece.x = this.board.width + 2;\r\n\t\tthis.nextPiece.y = 1;\t\t\r\n\t}\r\n\r\n\tmovePiece(direction) {\r\n\t\tthis.activePiece.x += direction;\r\n\t\tif(this.checkBoardCollision()){\r\n\t\t\tthis.activePiece.x -= direction;\r\n\t\t}\r\n\t}\r\n\r\n\tdropPiece() {\t\t\r\n\t\t\tthis.activePiece.y++;\r\n\t\t\tif(this.checkBoardCollision()) {\r\n\t\t\t\tthis.activePiece.y--;\r\n\t\t\t\tthis.board.mergePiece(this.activePiece)\r\n\t\t\t\tthis.resetPiece();\r\n\t\t\t\tthis.checkCompletedLines();\r\n\t\t\t}\r\n\t}\r\n\r\n\tcheckBoardCollision() {\r\n\t\tfor (let y = 0; y < this.activePiece.matrix.length; y++){\r\n\t\t\tfor (let x = 0; x < this.activePiece.matrix[y].length; x++) {\r\n\t\t\t\tif(\r\n\t\t\t\t\tthis.activePiece.matrix[y][x] !== 0 &&\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tthis.board.matrix[y + this.activePiece.y] &&\r\n\t\t\t\t\t\tthis.board.matrix[y + this.activePiece.y][x + this.activePiece.x] \r\n\t\t\t\t\t) \t!== 0\r\n\t\t\t\t)\t{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tresetPiece() {\r\n\t\t//find a more elegant method!\t\t\r\n\t\tthis.activePiece = new Piece(this.board, this.nextPiece.type)\r\n\t\tthis.nextPiece = new Piece(this.board);\r\n\t\tthis.nextPiece.x = this.board.width + 2;\r\n\t\tthis.nextPiece.y = 1;\r\n\r\n\t\t//Kills player and ends game as soon as new piece tries to spawn on occupied board space\r\n\t\tif(this.checkBoardCollision()){\r\n\t\t\tthis.isDead = true;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tcheckCompletedLines() {\r\n\t\t//variable to track number of lines in one pass\r\n\t\tlet completedLines = 0;\r\n\t\t//loop through board matrix\r\n\t\tfor (let i = 0; i < this.board.matrix.length; i++){\r\n\t\t\t//test if all entries are not 0 (I believe some() is faster - should check)\r\n\t\t\t//return true if there aren't any elements that are zero\r\n\t\t\tif(!this.board.matrix[i].some((elem) => {return !elem})) {\r\n\t\t\t\t//if so add to variable \r\n\t\t\t\tcompletedLines += 1;\r\n\t\t\t\t// then delete that row\r\n\t\t\t\tthis.board.matrix.splice(i, 1);\r\n\t\t\t\t//add a new blank row to beginning of array\r\n\t\t\t\tthis.board.matrix.unshift(new Array(this.board.matrix[0].length).fill(0))\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\tif(completedLines) {\r\n\t\t\tthis.linesCleared += completedLines;\r\n\t\t\tthis.score += (completedLines * 5) * (completedLines * 5)\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.activePiece.render();\r\n\t\tthis.nextPiece.render();\r\n\t\tcanvasText(this.ctx, this.score, undefined, '25px', ((this.board.width * this.board.tileSize) + 60), 200, 'white', 'center')\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./client/components/Player.js","import {drawMatrix} from '../utilities/utilities';\r\n\r\nclass Board {\r\n\tconstructor(board) {\r\n\t\t//should start tracking x/y for multiple boards later\r\n\t\tthis.width = board.width;\r\n\t\tthis.height = board.height;\r\n\t\tthis.tileSize = board.tileSize;\r\n\t\tthis.ctx = board.ctx;\r\n\t\tthis.matrix = this.generateEmptyBoard();\r\n\t\tthis.colorScheme = board.colorScheme;\r\n\t}\r\n\r\n\tgenerateEmptyBoard() {\r\n\t\tconst matrix = [];\r\n\t\tfor(let i = 0; i < this.height; i++){ \r\n\t\t\tmatrix.push(new Array(this.width).fill(0))\r\n\t\t};\r\n\t\treturn matrix;\r\n\t}\r\n\r\n\tmergePiece(piece) {\r\n\t\tfor (let y = 0; y < piece.matrix.length; y++) {\r\n\t\t\tfor (let x = 0; x < piece.matrix[y].length; x++) {\r\n\t\t\t\tif(piece.matrix[y][x] !== 0){\t\r\n\t\t\t\t\tthis.matrix[y + piece.y][x + piece.x] = piece.matrix[y][x];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tdrawMatrix(this.ctx, this.matrix, {x: 0, y: 0}, this.tileSize, this.colorScheme)\r\n\t}\r\n}\r\n\r\nexport default Board;\n\n\n// WEBPACK FOOTER //\n// ./client/components/Board.js","import {drawMatrix} from '../utilities/utilities';\r\n\r\nclass Piece {\r\n\tconstructor(board, type = this.newRandomType()) {\r\n\t\tthis.ctx = board.ctx;\r\n\t\tthis.tileSize = board.tileSize;\r\n\t\tthis.type = type;\r\n\t\tthis.matrix = this.createPiece(this.type);\r\n\t\tthis.colorScheme = board.colorScheme;\r\n\t\tthis.initX = Math.floor(board.width /2) - 2;\r\n\t\tthis.initY = 0;\r\n\t\tthis.x = this.initX;\r\n\t\tthis.y = this.initY;\r\n\t}\r\n\r\n\tnewRandomType() {\r\n\t\treturn 'TLJSZOI'[Math.random() * 7 | 0] //hardcoded variable quantity\r\n\t}\r\n\r\n\tcreatePiece(type) {\r\n\t\tswitch (type) {\r\n\t\t\tcase 'T':\r\n\t\t\t\treturn ([\r\n\t\t\t\t\t\t\t[0,1,0],\r\n\t\t\t\t\t\t\t[1,1,1],\r\n\t\t\t\t\t\t\t[0,0,0],\r\n\t\t\t\t\t\t])\r\n\t\t\tcase 'L':\r\n\t\t\t\treturn ([\r\n\t\t\t\t\t\t\t[0,2,0],\r\n\t\t\t\t\t\t\t[0,2,0],\r\n\t\t\t\t\t\t\t[0,2,2],\r\n\t\t\t\t\t\t])\r\n\t\t\tcase 'O':\r\n\t\t\t\treturn ([\r\n\t\t\t\t\t\t\t[3,3],\r\n\t\t\t\t\t\t\t[3,3],\r\n\t\t\t\t\t\t])\r\n\t\t\tcase 'J':\r\n\t\t\t\treturn ([\r\n\t\t\t\t\t\t\t[0,4,0],\r\n\t\t\t\t\t\t\t[0,4,0],\r\n\t\t\t\t\t\t\t[4,4,0],\r\n\t\t\t\t\t\t])\r\n\t\t\tcase 'I':\r\n\t\t\t\treturn ([\r\n\t\t\t\t\t\t\t[0,5,0,0],\r\n\t\t\t\t\t\t\t[0,5,0,0],\r\n\t\t\t\t\t\t\t[0,5,0,0],\r\n\t\t\t\t\t\t\t[0,5,0,0],\r\n\t\t\t\t\t\t])\r\n\t\t\tcase 'S':\r\n\t\t\t\treturn ([\r\n\t\t\t\t\t\t\t[0,6,6],\r\n\t\t\t\t\t\t\t[6,6,0],\r\n\t\t\t\t\t\t\t[0,0,0],\r\n\t\t\t\t\t\t])\r\n\t\t\tcase 'Z':\r\n\t\t\t\treturn ([\r\n\t\t\t\t\t\t\t[7,7,0],\r\n\t\t\t\t\t\t\t[0,7,7],\r\n\t\t\t\t\t\t\t[0,0,0],\r\n\t\t\t\t\t\t])\r\n\t\t}\r\n\t}\r\n\r\n\trotate(direction) {\r\n\t\t//TODO: Prevent rotating into wall\r\n\t\tlet swapped = JSON.parse(JSON.stringify(this.matrix));\r\n\t\tfor(let y = 0; y < swapped.length; y++) {\r\n\t\t\tfor (let x = y; x < swapped[y].length; x++) {\r\n\t\t\t\t[swapped[y][x], swapped[x][y]] = [swapped[x][y], swapped[y][x]]\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(direction === 1) {\r\n\t\t\tfor(let i = 0; i < swapped.length; i++) {\r\n\t\t\t\tswapped[i].reverse();\r\n\t\t\t}\r\n\t\t} else if (direction === -1){\r\n\t\t\tswapped.reverse();\r\n\t\t}\r\n\t\tthis.matrix = swapped;\r\n\t}\r\n\r\n\trender() {\r\n\t\tdrawMatrix(this.ctx, this.matrix, {x: this.x, y: this.y}, this.tileSize, this.colorScheme);\r\n\t}\r\n}\r\n\r\nexport default Piece;\n\n\n// WEBPACK FOOTER //\n// ./client/components/Piece.js","import Player from './components/Player';\r\nimport {drawMatrix} from './utilities/utilities';\r\n\r\n//Since tetris works in blocks, instead of changing the canvas context proportions 20:1\r\n//(which I assume means overlaying text would require a second canvas rendering), let's\r\n//define a block size and do all calculations with that.\r\nconst BLOCK = 20;\r\nconst LEFT_OFFSET = 200;\r\nconst TOP_OFFSET = 50;\r\nconst BOARD_WIDTH = 12;\r\nconst BOARD_HEIGHT = 20;\r\n\r\n//get the canvas context\r\nconst CANVAS_WIDTH = BLOCK * (BOARD_WIDTH + 6);\r\nconst CANVAS_HEIGHT = BLOCK * BOARD_HEIGHT;\r\n\r\nlet canvas = document.getElementById('gameCanvas');\r\ncanvas.width = CANVAS_WIDTH;\r\ncanvas.height = CANVAS_HEIGHT;\r\n\r\n//#### GAME STATE ####\r\nlet ctx = canvas.getContext('2d');\r\nconst defaultColorScheme = {\r\n\tpieces: ['red', 'blue', 'purple', 'pink','orange', 'indigo', 'green'],\r\n\toutline: 'black',\r\n}\r\n\r\nfunction game() {\r\n\t//going to have to decide if I want to use global eventlisteners again or component \r\n\t//ones that are deleted when component is unmounted (perhaps by storing them in\r\n\t//global array and iterating through that deleting everything in when moving to \r\n\t//next screen OR by having global eventlistener function that I overwrite at beginning\r\n\t//of each component lifecycle)\r\n\r\n\tlet player = new Player({width: BOARD_WIDTH, height: BOARD_HEIGHT, tileSize: BLOCK, colorScheme: defaultColorScheme, ctx: ctx});\r\n\r\n\t//Used to control drop timing\r\n\tconst DROP_INIT = 1000;\r\n\tconst DROP_MAX = 50;\r\n\r\n\tlet speedModifier = 1;\r\n\r\n\tlet dropInterval = DROP_INIT; //in milliseconds\r\n\tlet dropCounter = 0;\r\n\tlet lastTime = 0\r\n\r\n\tfunction clsGameActive() {\r\n\t\tctx.fillStyle = 'rgba(0,0,0, 1)';\r\n\t\tctx.fillRect(0,0, canvas.width, canvas.height);\t\r\n\t\tctx.strokeStyle = 'white';\r\n\t\tctx.strokeRect(0,0, BOARD_WIDTH * BLOCK, BOARD_HEIGHT * BLOCK)\t\r\n\t}\r\n\r\n\r\n\r\n\tdocument.addEventListener('keydown', handleKeydown);\r\n\r\n\tfunction handleKeydown(event) {\r\n\t\tif(!player.isDead){\r\n\t\t\tif(event.keyCode === 65) {\r\n\t\t\t\t//'a'\r\n\t\t\t\tplayer.movePiece(-1)\r\n\t\t\t} else if (event.keyCode === 68) {\r\n\t\t\t\t//'d'\r\n\t\t\t\tplayer.movePiece(1)\r\n\t\t\t} else if (event.keyCode === 83) {\r\n\t\t\t\t//'s' accelerate drop\r\n\t\t\t\tplayer.dropPiece()\r\n\t\t\t\tdropCounter = 0;\r\n\t\t\t} else if (event.keyCode === 69) {\r\n\t\t\t\t//'e' for rotate clockwise\r\n\t\t\t\tplayer.activePiece.rotate(1);\r\n\t\t\t} else if (event.keyCode === 81) {\r\n\t\t\t\t//'q' for rotate counter-clockwise\r\n\t\t\t\tplayer.activePiece.rotate(-1)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction gameActive(time = 0) {\r\n\t\tclsGameActive();\r\n\t\tdropInterval = updateDropInterval();\r\n\t\t//is time argument baked into requestAnimationFrame? Seems like it must be.\r\n\t\tconst deltaTime = time - lastTime;\r\n\t\tlastTime = time;\r\n\t\tdropCounter += deltaTime;\r\n\t\tif (dropCounter > dropInterval) {\r\n\t\t\tif(!player.isDead) {\r\n\t\t\t\tplayer.dropPiece();\r\n\t\t\t\tdropCounter = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\tplayer.board.render()\r\n\t\tplayer.render()\r\n\t\trequestAnimationFrame(gameActive)\r\n\t}\r\n\r\n\tfunction updateDropInterval() {\r\n\t\t// if (player.linesCleared )\r\n\t\treturn DROP_INIT * speedModifier;\r\n\t}\r\n\r\n\tgameActive();\r\n\r\n}\r\n\r\ngame()\r\n\r\n\r\n//todo make drop interval dynamic based on player progress and have score increased as\r\n//a multiplier of that somehow\r\n\r\n//todo error checking to prevent rotating into wall\r\n\r\n//todo Can't create a new piece when collision, except when pressing down - stop that\n\n\n// WEBPACK FOOTER //\n// ./client/main.js"],"sourceRoot":""}